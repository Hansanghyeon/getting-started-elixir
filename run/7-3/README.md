# 머리와 꼬리를 사용해 리스트 만들기

이제 조금 더 과감해지자, 숫자로 이루어진 리스트를 받아, 그 숫자들의 제곱을 새로운 리스로 반환하는 함수를 만들어보자.

```exs
defmodule Test do
  def square([]), do: []
  def square([ head | tail ]), do: [ head * head | square(tail) ]
end
```

코드는 짧지만 많은 의미를 담고 있다. 먼저 각 square 함수의 파라미터 패턴에 주목하자. 첫 번째 정의는 빈 리스트에 매칭되고, 두 번째 정의는 나머지 리스트에 매칭된다. 이어서 두 번째 함수 정의의 본문을 보자.

```exs
def square([ head | tail ]), do: [ head * head | square(tail) ]
```

비어 있지 않은 리스트가 패턴 매칭되면 새로운 리스트가 반환된다. 새로운 리스트의 머리는 원래 리스트 머리의 값의 제곱이고, 꼬리는 원래 리스트의 꼬리를 square 함수에 넣어 반환받은 리스트가 된다. 재귀적으로 리스트를 연산하고 있다.